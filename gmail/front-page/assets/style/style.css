/* === Variables CSS modernes === */
:root {
  /* === Couleurs Pastel Bleu Harmonisées === */
  --bg: #ffffff;
  --surface: #ffffff;
  --text: #334155;
  --text-secondary: #64748b;
  --text-muted: #94a3b8;
  --primary: #60a5fa;
  --primary-hover: #93c5fd;
  --primary-dark: #3b82f6;
  --primary-light: #dbeafe;
  --success: #86efac;
  --danger: #fca5a5;
  --border: #cbd5e1;
  --border-light: #e2e8f0;
  --hover-bg: #f8fafc;
  --selected-bg: #f0f9ff;
  
  /* === Shadows === */
  --shadow-sm: 0 1px 3px rgba(0,0,0,0.05);
  --shadow-md: 0 4px 12px rgba(0,0,0,0.08);
  --shadow-lg: 0 8px 24px rgba(0,0,0,0.12);
  
  /* === Animations Minimalistes 2025 === */
  --anim-duration-fast: 150ms;
  --anim-duration-base: 200ms;
  --anim-ease: cubic-bezier(0.4, 0, 0.2, 1);
  
  /* === Spacing === */
  --space-xs: 4px;
  --space-sm: 8px;
  --space-md: 12px;
  --space-lg: 20px;
  --space-xl: 28px;
  
  /* === Border Radius === */
  --radius-sm: 6px;
  --radius-md: 8px;
  --radius-lg: 12px;
  --radius-full: 999px;
  
  /* === Typography === */
  --font-sans: 'Inter','Google Sans','Roboto',system-ui,sans-serif;
  --font-size-xs: 0.75rem;
  --font-size-sm: 0.875rem;
  --font-size-base: 1rem;
  --font-size-lg: 1.125rem;
  --font-size-xl: 1.25rem;
  --font-size-2xl: 1.5rem;
}

*,*::before,*::after{box-sizing:border-box}
html{height:100%;scroll-behavior:smooth}
body{margin:0;height:100%;font-family:var(--font-sans);font-size:var(--font-size-base);color:var(--text);background:#ffffff;line-height:1.5;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}

.visually-hidden{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0}

.loading-overlay{position:fixed;inset:0;background:rgba(51,65,85,0.5);backdrop-filter:blur(4px);display:flex;flex-direction:column;align-items:center;justify-content:center;gap:var(--space-md);z-index:9999;animation:fadeIn 0.2s ease}
.spinner{width:48px;height:48px;border:4px solid var(--border-light);border-top-color:var(--primary);border-radius:var(--radius-full);animation:spin 0.8s linear infinite}
@keyframes spin{to{transform:rotate(360deg)}}
@keyframes fadeIn{from{opacity:0}to{opacity:1}}

/* === 📨 HEADER AVEC LOGO CENTRÉ ET SHINY === */
.topbar{
  position:sticky;
  top:0;
  z-index:100;
  background:rgba(255,255,255,0.95);
  backdrop-filter:blur(16px);
  -webkit-backdrop-filter:blur(16px);
  border-bottom:1px solid var(--border-light);
  padding:var(--space-lg) var(--space-xl);
  display:flex;
  align-items:center;
  justify-content:center;
  box-shadow:0 1px 3px rgba(100,116,139,0.05);
}

.logo{
  display:flex;
  align-items:center;
  gap:var(--space-sm);
  position:relative;
  overflow:hidden;
  text-decoration:none;
  cursor:pointer;
  transition:opacity 0.2s ease;
}

.logo:hover{
  opacity:0.9;
}

/* Logo icône ultra-doux */
.logo-icon{
  width:36px;
  height:36px;
  position:relative;
  z-index:1;
  filter:drop-shadow(0 2px 6px rgba(147,197,253,0.3));
  transition:transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
}

.logo:hover .logo-icon{
  transform:scale(1.05);
}

/* Texte doux et apaisant */
.logo-text{
  margin:0;
  font-size:1.8rem;
  font-weight:700;
  letter-spacing:0;
  font-family:'Inter',system-ui,-apple-system,sans-serif;
  text-transform:lowercase;
  position:relative;
  z-index:1;
  background:linear-gradient(120deg,#93c5fd 0%,#60a5fa 50%,#93c5fd 100%);
  -webkit-background-clip:text;
  -webkit-text-fill-color:transparent;
  background-clip:text;
  text-shadow:0 1px 2px rgba(147,197,253,0.2);
}

/* Effet shiny chill et apaisant */
.logo::after{
  content:'';
  position:absolute;
  top:-50%;
  left:-150%;
  width:50%;
  height:200%;
  background:linear-gradient(
    90deg,
    transparent 0%,
    rgba(255,255,255,0.4) 50%,
    transparent 100%
  );
  transform:skewX(-30deg);
  animation:shine 8s ease-in-out infinite;
  pointer-events:none;
  z-index:2;
}

@keyframes shine{
  0%{
    left:-150%;
  }
  12%{
    left:150%;
  }
  100%{
    left:150%;
  }
}

.layout{display:grid;gap:var(--space-md);padding:var(--space-md);max-width:1600px;margin:0 auto}
@media (min-width:1024px){
  .layout{grid-template-columns:1fr 380px;gap:var(--space-lg);padding:var(--space-lg)}
  .summary{order:2;position:sticky;top:calc(72px + var(--space-lg));max-height:calc(100vh - 96px);overflow-y:auto}
  .list{order:1}
}

/* === CARDS BLANC/BLEU === */
.card{background:var(--surface);border:1px solid var(--border-light);border-radius:var(--radius-lg);padding:var(--space-xl);transition:border-color var(--anim-duration-base) var(--anim-ease), box-shadow var(--anim-duration-base) var(--anim-ease);box-shadow:0 1px 2px rgba(100,116,139,0.03)}
.card:hover{border-color:var(--border);box-shadow:0 2px 6px rgba(96,165,250,0.08)}
.card.list{padding:var(--space-lg)}
.card.summary{padding:var(--space-xl);background:var(--surface);box-shadow:0 1px 3px rgba(100,116,139,0.04)}

/* === HEADER RÉSUMÉ === */
.summary-header{display:flex;align-items:center;justify-content:space-between;margin-bottom:var(--space-xl);padding-bottom:var(--space-lg);border-bottom:1px solid var(--border-light)}
.summary-header h2{margin:0;font-size:10px;font-weight:800;text-transform:uppercase;letter-spacing:0.12em;color:var(--text-muted)}

/* === MÉTRIQUES BLEU COHÉRENT === */
.metric-cards{display:grid;grid-template-columns:repeat(2,1fr);gap:var(--space-sm);margin-bottom:var(--space-xl)}
.metric-card{display:flex;align-items:center;gap:var(--space-md);padding:var(--space-md);background:var(--surface);border:1px solid var(--border-light);border-radius:var(--radius-md);transition:border-color var(--anim-duration-fast) var(--anim-ease), box-shadow var(--anim-duration-fast) var(--anim-ease)}
.metric-card:hover{border-color:var(--primary-light);box-shadow:0 2px 4px rgba(96,165,250,0.1)}
.metric-icon{width:24px;height:24px;stroke-width:1.8;color:var(--primary);opacity:0.7}
.metric-content{display:flex;flex-direction:column;gap:4px}
.metric-label{font-size:10px;color:var(--text-muted);text-transform:uppercase;letter-spacing:0.12em;font-weight:700}
.metric-value{font-size:1.75rem;font-weight:800;color:var(--text);letter-spacing:-0.03em}

/* === SECTIONS RÉSUMÉ MODERNISÉES === */
.summary-section{
  margin-bottom:var(--space-xl);
}

.summary-section-header{
  display:flex;
  align-items:center;
  gap:var(--space-sm);
  margin-bottom:var(--space-sm);
}

.summary-section-title{
  font-size:10px;
  font-weight:800;
  text-transform:uppercase;
  letter-spacing:0.12em;
  color:var(--text-muted);
}

.summary-icon{
  width:14px;
  height:14px;
  stroke-width:2;
  color:var(--primary);
  opacity:0.6;
}

/* Badges expéditeurs cliquables */

.sender-badge{
  appearance:none;
  display:inline-flex;
  align-items:center;
  gap:var(--space-xs);
  padding:var(--space-sm) var(--space-md);
  background:var(--surface);
  border:1px solid var(--border-light);
  border-radius:var(--radius-full);
  cursor:pointer;
  transition:all var(--anim-duration-fast) var(--anim-ease);
  font-family:var(--font-sans);
}

.sender-badge:hover{
  background:var(--primary-light);
  border-color:var(--primary);
  transform:translateY(-1px);
  box-shadow:0 2px 6px rgba(96,165,250,0.15);
}

.badge-count{
  display:inline-flex;
  align-items:center;
  justify-content:center;
  min-width:20px;
  padding:0 4px;
  font-size:11px;
  font-weight:700;
  color:var(--primary);
  background:transparent;
}

/* Tags thèmes */
.topic-tags{
  display:flex;
  flex-wrap:wrap;
  gap:var(--space-sm);
}

.topic-tag{
  display:inline-block;
  padding:6px var(--space-md);
  font-size:var(--font-size-xs);
  font-weight:700;
  color:var(--primary-dark);
  background:var(--primary-light);
  border-radius:var(--radius-full);
  letter-spacing:0.04em;
}

/* === URGENCE BADGE === */
.urgency-badge{
  display:inline-flex;
  align-items:center;
  gap:var(--space-xs);
  padding:var(--space-sm) var(--space-md);
  margin-bottom:var(--space-xl);
  border-radius:var(--radius-full);
  font-size:var(--font-size-xs);
  font-weight:700;
  text-transform:uppercase;
  letter-spacing:0.06em;
}

.urgency-low{
  background:var(--primary-light);
  color:var(--primary);
}

.urgency-medium{
  background:#fef3c7;
  color:#d97706;
}

.urgency-high{
  background:#fee2e2;
  color:#dc2626;
}

.urgency-icon{
  width:14px;
  height:14px;
  stroke-width:2.5;
}

/* === EMAILS PRIORITAIRES === */
.priority-list{
  display:flex;
  flex-direction:column;
  gap:var(--space-xs);
}

.priority-item{
  display:flex;
  align-items:flex-start;
  gap:var(--space-xs);
  padding:var(--space-sm);
  background:var(--hover-bg);
  border-radius:var(--radius-sm);
  border-left:2px solid var(--primary);
}

.priority-icon{
  width:14px;
  height:14px;
  stroke-width:2;
  color:var(--primary);
  opacity:0.6;
  margin-top:2px;
  flex-shrink:0;
}

.priority-text{
  font-size:var(--font-size-xs);
  line-height:1.5;
  color:var(--text);
  font-weight:500;
}

/* === CATÉGORIES === */
.empty-text{
  color:var(--text-muted);
  font-size:var(--font-size-sm);
  font-style:italic;
  opacity:0.6;
}

/* === COH\u00c9RENCE GLOBALE === */

/* Tous les titres de sections */
.summary-header h2,
.summary-section-title{
  font-size:10px;
  font-weight:800;
  text-transform:uppercase;
  letter-spacing:0.12em;
}

/* Toutes les ic\u00f4nes de sections */
.summary-icon,
.ai-icon,
.metric-icon{
  stroke-width:2;
  opacity:0.7;
}

/* Tous les espacements de sections */
.metric-cards,
.summary-section,
/* Tous les border-radius par type */
.card,
.modal-content{
  border-radius:var(--radius-lg);
}

.metric-card,
.filters-toolbar,
.filter-dropdown-menu{
  border-radius:var(--radius-md);
}

.sender-badge,
.topic-tag,
.filter-badge{
  border-radius:var(--radius-full);
}
.summary-actions-list{margin:0;padding:var(--space-md);list-style:none}
.summary-actions-list li{padding:var(--space-sm) 0;padding-left:var(--space-lg);position:relative;color:var(--text-secondary);font-size:var(--font-size-sm)}
.summary-actions-list li::before{content:"✓";position:absolute;left:0;color:var(--success);font-weight:bold}

/* === RÉSUMÉ IA === */
.ai-summary{
  margin-top:var(--space-lg);
  margin-bottom:var(--space-lg);
  padding:var(--space-lg);
  background:linear-gradient(135deg,#f0f9ff 0%,#fafcfe 100%);
  border:1px solid #bfdbfe;
  border-left:4px solid var(--primary);
  border-radius:var(--radius-md);
  box-shadow:0 2px 8px rgba(96,165,250,0.1);
}

.ai-header{
  display:flex;
  align-items:center;
  gap:var(--space-sm);
  margin-bottom:var(--space-md);
}

.urgency-badge-inline{
  display:inline-flex;
  align-items:center;
  padding:4px 12px;
  border-radius:12px;
  font-size:11px;
  font-weight:700;
  letter-spacing:0.5px;
  text-transform:uppercase;
  margin-left:auto;
  transition:all 0.2s ease;
}

.urgency-badge-inline.hidden{
  display:none;
}

.urgency-badge-inline[data-level="faible"]{
  background:#dbeafe;
  color:#1e40af;
  border:1px solid #93c5fd;
}

.urgency-badge-inline[data-level="moyenne"]{
  background:#fef3c7;
  color:#92400e;
  border:1px solid #fcd34d;
}

.urgency-badge-inline[data-level="élevée"],
.urgency-badge-inline[data-level="elevee"]{
  background:#fee2e2;
  color:#991b1b;
  border:1px solid #fca5a5;
}

.ai-icon{
  width:18px;
  height:18px;
  stroke-width:2;
  color:var(--primary);
  opacity:0.9;
}

.ai-title{
  font-weight:700;
  font-size:11px;
  text-transform:uppercase;
  letter-spacing:0.1em;
  color:var(--primary);
  flex:1;
}

.ai-content{
  margin:0;
  margin-bottom:var(--space-sm);
  font-size:var(--font-size-sm);
  line-height:1.8;
  color:var(--text);
  font-weight:500;
}

.topics-inline{
  display:flex;
  flex-wrap:wrap;
  gap:6px;
}

.topic-tag-inline{
  display:inline-flex;
  align-items:center;
  padding:4px 10px;
  font-size:11px;
  font-weight:600;
  color:#3b82f6;
  background:rgba(239,246,255,0.6);
  border-radius:10px;
  letter-spacing:0.3px;
  transition:all 0.15s ease;
}

.topic-tag-inline:hover{
  background:rgba(219,234,254,0.8);
  transform:scale(1.05);
}

.summary-actions{display:flex;flex-direction:column;gap:var(--space-md);padding-top:var(--space-xl);margin-top:var(--space-xl);border-top:1px solid var(--border-light)}
.last-updated{display:flex;align-items:center;justify-content:center;gap:6px;font-size:11px;color:var(--text-muted);text-align:center}
.last-updated::before{content:"⏱️";opacity:0.5;font-size:14px}

.btn{appearance:none;display:inline-flex;align-items:center;justify-content:center;gap:var(--space-sm);padding:var(--space-sm) var(--space-md);font-family:var(--font-sans);font-size:var(--font-size-sm);font-weight:500;line-height:1;color:var(--text);background:var(--surface);border:1px solid var(--border);border-radius:var(--radius-sm);cursor:pointer;transition:background var(--anim-duration-fast) var(--anim-ease), border-color var(--anim-duration-fast) var(--anim-ease), opacity var(--anim-duration-fast) var(--anim-ease);user-select:none;text-decoration:none}
.btn:hover{background:var(--hover-bg);border-color:var(--text-secondary);text-decoration:none}
.btn:active{opacity:0.8}
.btn:disabled{opacity:0.5;cursor:not-allowed}
.btn.primary{background:var(--primary);border-color:var(--primary);color:white}
.btn.primary:hover{background:var(--primary-dark);border-color:var(--primary-dark)}
.btn.large{width:100%;padding:var(--space-md) var(--space-lg);font-size:var(--font-size-sm);font-weight:600;border-radius:var(--radius-lg);height:48px}
.btn-icon{appearance:none;display:inline-flex;align-items:center;justify-content:center;width:40px;height:40px;padding:0;font-size:var(--font-size-lg);color:var(--text-secondary);background:transparent;border:none;border-radius:var(--radius-md);cursor:pointer;transition:background var(--anim-duration-fast) var(--anim-ease), color var(--anim-duration-fast) var(--anim-ease)}
.btn-icon:hover{background:var(--hover-bg);color:var(--text)}

/* === 🎛️ FILTERS TOOLBAR (HARMONISÉE) === */

.filters-toolbar {
  display: flex;
  flex-direction: column;
  gap: var(--space-md);
  padding: var(--space-lg);
  margin-bottom: var(--space-lg);
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: var(--radius-lg);
  box-shadow: 0 1px 3px rgba(100,116,139,0.04);
}

.filters-row {
  display: flex;
  align-items: center;
  gap: var(--space-md);
  flex-wrap: wrap;
}

.filter-separator {
  width: 1px;
  height: 32px;
  background: var(--border);
  margin: 0 var(--space-xs);
}

/* === Recherche (pleine largeur) === */
.search-container {
  position: relative;
  width: 100%;
}

.search-icon {
  position: absolute;
  left: var(--space-md);
  top: 50%;
  transform: translateY(-50%);
  width: 18px;
  height: 18px;
  color: var(--text-muted);
  opacity: 0.6;
  pointer-events: none;
}

.search-input {
  width: 100%;
  padding: var(--space-md) var(--space-lg);
  padding-left: 44px;
  padding-right: 60px;
  font-family: var(--font-sans);
  font-size: var(--font-size-sm);
  color: var(--text);
  background: var(--surface);
  border: 1px solid var(--border-light);
  border-radius: var(--radius-lg);
  outline: none;
  transition: all var(--anim-duration-base) var(--anim-ease);
}

.search-input:hover {
  border-color: var(--text-secondary);
  box-shadow: 0 2px 8px rgba(100,116,139,0.08);
}

.search-input:focus {
  border-color: var(--primary);
  box-shadow: 0 0 0 3px var(--primary-light);
}

.search-shortcut {
  position: absolute;
  right: var(--space-md);
  top: 50%;
  transform: translateY(-50%);
  padding: 2px 6px;
  font-size: 10px;
  font-weight: 600;
  color: var(--text-muted);
  background: var(--hover-bg);
  border: 1px solid var(--border);
  border-radius: 4px;
  pointer-events: none;
}

/* === Boutons de filtres === */
.filter-item {
  position: relative;
}

.filter-btn,
.filter-toggle {
  appearance: none;
  display: inline-flex;
  align-items: center;
  gap: var(--space-sm);
  padding: 10px var(--space-md);
  font-family: var(--font-sans);
  font-size: var(--font-size-sm);
  font-weight: 600;
  color: var(--text);
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: var(--radius-md);
  cursor: pointer;
  transition: all var(--anim-duration-fast) var(--anim-ease);
  user-select: none;
  white-space: nowrap;
}

.filter-btn:hover,
.filter-toggle:hover {
  background: var(--hover-bg);
  border-color: var(--text-secondary);
  color: var(--text);
}

.filter-btn:active,
.filter-toggle:active {
  opacity: 0.8;
}

/* État actif pour les toggles - bleu uni */
.filter-toggle[aria-pressed="true"] {
  background: var(--primary);
  border-color: var(--primary);
  color: white;
}

.filter-toggle[aria-pressed="true"]:hover {
  background: var(--primary-hover);
  border-color: var(--primary-hover);
}

.filter-icon {
  width: 16px;
  height: 16px;
  stroke-width: 2;
}

.filter-label {
  font-weight: 500;
}

.filter-chevron {
  width: 14px;
  height: 14px;
  opacity: 0.7;
  transition: transform var(--anim-duration-base) var(--anim-ease);
}

.filter-btn[aria-expanded="true"] .filter-chevron {
  transform: rotate(180deg);
}

.filter-badge {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  min-width: 22px;
  height: 22px;
  padding: 0 7px;
  font-size: 11px;
  font-weight: 700;
  border-radius: var(--radius-full);
  transition: all var(--anim-duration-base) var(--anim-ease);
}

.filter-toggle[aria-pressed="false"] .filter-badge {
  background: var(--primary-light);
  color: var(--primary);
}

.filter-toggle[aria-pressed="true"] .filter-badge {
  background: var(--surface);
  color: white;
  opacity: 0.9;
}

/* === Dropdowns === */
.filter-dropdown-menu {
  position: absolute;
  top: calc(100% + 6px);
  left: 0;
  min-width: 220px;
  max-height: 400px;
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: var(--radius-md);
  box-shadow: var(--shadow-lg);
  z-index: 100;
  animation: dropdownSlide var(--anim-duration-base) var(--anim-ease);
}

@keyframes dropdownSlide {
  from {
    opacity: 0;
    transform: translateY(-4px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.dropdown-search {
  position: relative;
  padding: var(--space-sm);
  border-bottom: 1px solid var(--border-light);
}

.dropdown-search-icon {
  position: absolute;
  left: 16px;
  top: 50%;
  transform: translateY(-50%);
  width: 14px;
  height: 14px;
  color: var(--text-muted);
  pointer-events: none;
}

.dropdown-search-input {
  width: 100%;
  padding: 6px var(--space-sm);
  padding-left: 32px;
  font-family: var(--font-sans);
  font-size: var(--font-size-sm);
  color: var(--text);
  background: var(--hover-bg);
  border: 1px solid var(--border);
  border-radius: var(--radius-sm);
  outline: none;
  transition: border-color var(--anim-duration-fast) var(--anim-ease),
              background var(--anim-duration-fast) var(--anim-ease);
}

.dropdown-search-input:focus {
  border-color: var(--primary);
  background: var(--surface);
}

.dropdown-list {
  max-height: 320px;
  overflow-y: auto;
  padding: var(--space-xs);
}

.dropdown-item {
  appearance: none;
  display: flex;
  align-items: center;
  gap: var(--space-sm);
  width: 100%;
  padding: var(--space-sm) var(--space-md);
  font-family: var(--font-sans);
  font-size: var(--font-size-sm);
  color: var(--text-secondary);
  background: transparent;
  border: none;
  border-radius: var(--radius-sm);
  cursor: pointer;
  text-align: left;
  transition: all var(--anim-duration-fast) var(--anim-ease);
}

.dropdown-item:hover {
  background: var(--hover-bg);
  color: var(--text);
}

.dropdown-item.active {
  background: var(--primary-light);
  color: var(--primary-dark);
  font-weight: 600;
}

.dropdown-item.active .dropdown-icon {
  color: var(--primary-dark);
}

.dropdown-icon {
  width: 16px;
  height: 16px;
  stroke-width: 2;
  opacity: 0.7;
}

/* === Table === */
.table-wrap {
  overflow-x: auto;
  border-radius: var(--radius-md);
  border: 1px solid var(--border-light);
}

.mails {
  width: 100%;
  border-collapse: separate;
  border-spacing: 0;
  font-size: var(--font-size-sm);
}

.mails thead {
  background: var(--hover-bg);
}

.mails th {
  padding: var(--space-md);
  text-align: left;
  font-weight: 700;
  color: var(--text-muted);
  font-size: 10px;
  text-transform: uppercase;
  letter-spacing: 0.12em;
  border-bottom: 1px solid var(--border-light);
  background: var(--surface);
  position: sticky;
  top: 0;
  z-index: 10;
  user-select: none;
  cursor: default;
  pointer-events: none;
}

.mails tbody tr {
  transition: background var(--anim-duration-fast) var(--anim-ease);
  cursor: pointer;
  position: relative;
}

.mails tbody tr:hover {
  background: var(--hover-bg);
}

.mails tbody tr.selected {
  background: var(--selected-bg);
}

.mails td {
  padding: var(--space-md) var(--space-md);
  color: var(--text);
  border-bottom: 1px solid var(--border-light);
}

.mails tbody tr:last-child td {
  border-bottom: none;
}

.empty-state{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:var(--space-xl) var(--space-lg);text-align:center;min-height:400px}
.empty-emoji{font-size:80px;margin-bottom:var(--space-lg);animation:float 3s ease-in-out infinite}
.empty-title{margin:0 0 var(--space-sm);font-size:18px;font-weight:700;color:var(--text)}
.empty-description{margin:0;color:var(--text-secondary);font-size:14px;line-height:1.5;max-width:320px}

@keyframes float{0%,100%{transform:translateY(0)}50%{transform:translateY(-10px)}}

.toast{position:fixed;bottom:var(--space-lg);left:50%;transform:translateX(-50%);min-width:300px;max-width:500px;padding:var(--space-md) var(--space-lg);font-size:var(--font-size-sm);font-weight:500;color:white;background:var(--text);border-radius:var(--radius-md);box-shadow:var(--shadow-lg);animation:slideUp 0.2s ease;z-index:1000}
@keyframes slideUp{from{opacity:0;transform:translate(-50%,20px)}to{opacity:1;transform:translate(-50%,0)}}
.toast.ok{background:var(--success)}
.toast.err{background:var(--danger)}

/* === 🪟 MODAL EMAIL === */
.modal{
  position:fixed;
  inset:0;
  z-index:1000;
  display:flex;
  align-items:center;
  justify-content:center;
  padding:var(--space-md);
  animation:fadeIn var(--anim-duration-base) var(--anim-ease);
}

.modal-overlay{
  position:absolute;
  inset:0;
  background:rgba(51,65,85,0.4);
  backdrop-filter:blur(4px);
  -webkit-backdrop-filter:blur(4px);
}

.modal-content{
  position:relative;
  width:100%;
  max-width:600px;
  max-height:90vh;
  background:var(--surface);
  border-radius:var(--radius-lg);
  box-shadow:0 20px 60px rgba(51,65,85,0.25);
  overflow:hidden;
  animation:modalSlide var(--anim-duration-base) var(--anim-ease);
}

@keyframes modalSlide{
  from{
    opacity:0;
    transform:translateY(-20px) scale(0.95);
  }
  to{
    opacity:1;
    transform:translateY(0) scale(1);
  }
}

.modal-header{
  display:flex;
  align-items:center;
  gap:var(--space-md);
  padding:var(--space-lg);
  border-bottom:1px solid var(--border-light);
  background:linear-gradient(135deg,#f0f9ff 0%,#fafcfe 100%);
}

.modal-nav{
  appearance:none;
  display:flex;
  align-items:center;
  justify-content:center;
  width:36px;
  height:36px;
  padding:0;
  background:transparent;
  border:1px solid var(--border-light);
  border-radius:var(--radius-sm);
  cursor:pointer;
  transition:background var(--anim-duration-fast) var(--anim-ease), border-color var(--anim-duration-fast) var(--anim-ease);
}

.modal-nav:hover{
  background:var(--hover-bg);
  border-color:var(--border);
}

.modal-nav:disabled{
  opacity:0.3;
  cursor:not-allowed;
}

.modal-nav i{
  width:20px;
  height:20px;
  stroke-width:2;
  color:var(--text-secondary);
}

.modal-title{
  margin:0;
  font-size:var(--font-size-lg);
  font-weight:700;
  color:var(--text);
  flex:1;
  text-align:center;
}

.modal-close{
  appearance:none;
  display:flex;
  align-items:center;
  justify-content:center;
  width:36px;
  height:36px;
  padding:0;
  background:transparent;
  border:none;
  border-radius:var(--radius-sm);
  cursor:pointer;
  transition:background var(--anim-duration-fast) var(--anim-ease);
}

.modal-close:hover{
  background:var(--hover-bg);
}

.modal-close i{
  width:20px;
  height:20px;
  stroke-width:2;
  color:var(--text-secondary);
}

/* === MODAL BODY ULTRA-CLEAN === */
.modal-body{
  padding:var(--space-xl);
  max-height:70vh;
  overflow-y:auto;
}

/* Sujet - seul élément important */
.modal-subject{
  margin:0 0 var(--space-lg) 0;
  font-size:1.4rem;
  font-weight:700;
  color:var(--text);
  line-height:1.4;
  letter-spacing:-0.01em;
}

/* Méta claire et lisible */
.modal-meta{
  display:flex;
  align-items:center;
  gap:var(--space-sm);
  padding:var(--space-md);
  background:var(--hover-bg);
  border-radius:var(--radius-md);
  font-size:var(--font-size-sm);
  color:var(--text-muted);
}

.modal-from{
  font-weight:600;
  color:var(--text);
}

.modal-dot{
  opacity:0.3;
  margin:0 var(--space-xs);
}

.modal-date{
  font-weight:500;
  color:var(--text-secondary);
}

.modal-footer{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:var(--space-lg);
  padding:var(--space-xl);
  border-top:1px solid var(--border-light);
  background:var(--surface);
}

.modal-actions-left{
  display:flex;
  gap:var(--space-sm);
}

.btn-modal-action{
  appearance:none;
  display:inline-flex;
  align-items:center;
  justify-content:center;
  width:40px;
  height:40px;
  padding:0;
  background:var(--surface);
  border:1px solid var(--border-light);
  border-radius:var(--radius-sm);
  cursor:pointer;
  transition:background var(--anim-duration-fast) var(--anim-ease), border-color var(--anim-duration-fast) var(--anim-ease);
}

.btn-modal-action:hover{
  background:var(--hover-bg);
  border-color:var(--border);
}

.btn-modal-action.active{
  background:linear-gradient(135deg,#f0f9ff 0%,#dbeafe 100%);
  border-color:#93c5fd;
}

.action-icon{
  width:20px;
  height:20px;
  stroke-width:2;
  color:var(--text-secondary);
}

.btn-modal-action.active .action-icon{
  color:var(--primary);
}

@media (max-width:768px){
  .modal-content{
    max-width:100%;
    max-height:95vh;
    border-radius:var(--radius-md) var(--radius-md) 0 0;
    align-self:flex-end;
  }
  
  .email-meta{
    grid-template-columns:1fr;
  }
  
  .modal-footer{
    flex-direction:column;
  }
  
  .modal-actions-left{
    order:2;
    width:100%;
    justify-content:space-around;
  }
  
  .modal-footer .btn{
    order:1;
    width:100%;
  }
}

.hidden{display:none!important}

@media (max-width:768px){
  .topbar{padding:var(--space-md)}
  .logo-text{font-size:1.4rem;font-weight:700}
  .logo-icon{width:28px;height:28px}
  .logo{gap:var(--space-xs)}
  .metric-cards{grid-template-columns:1fr}
  .search-shortcut{display:none}
  
  /* Toolbar responsive */
  .filters-row {
    justify-content: center;
  }
  
  .filter-label {
    display: none;
  }
  
  .filter-btn,
  .filter-toggle {
    padding: 8px;
    min-width: 44px;
    justify-content: center;
  }
  
  .filter-separator {
    display: none;
  }
}

/* === 🍬 SMOOTH & CANDY UX ENHANCEMENTS === */

/* Supprimé - glassmorphism */

/* Supprimé - effets glow */

/* Supprimé - effet trop voyant */

.filter-chip:hover {
  transform: scale(1.05);
  box-shadow: var(--shadow-sm);
}

/* Ripple effect on buttons */
.btn {
  position: relative;
  overflow: hidden;
}

.btn::before {
  content: '';
  position: absolute;
  top: 50%;
  left: 50%;
  width: 0;
  height: 0;
  border-radius: 50%;
  background: rgba(255, 255, 255, 0.4);
  transform: translate(-50%, -50%);
  transition: width 0.6s, height 0.6s;
}

.btn:active::before {
  width: 300px;
  height: 300px;
}




/* Smooth underline on hover */
.th-label {
  position: relative;
  display: inline-block;
}

.th-label::after {
  content: '';
  position: absolute;
  bottom: -4px;
  left: 0;
  width: 0;
  height: 2px;
  background: var(--primary);
  transition: width 0.3s ease;
}

.th-filter-btn:hover .th-label::after {
  width: 100%;
}

/* Supprimé - effet 3D inutile */



/* Enhanced toast with slide and fade */
@keyframes toast-in {
  0% {
    opacity: 0;
    transform: translate(-50%, 100px) scale(0.8);
  }
  100% {
    opacity: 1;
    transform: translate(-50%, 0) scale(1);
  }
}

.toast {
  animation: toast-in 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55);
}

/* Checkbox animation */

/* Smooth row selection */
.mails tbody tr {
  transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
}

.mails tbody tr.selected {
  transform: translateX(4px);
  box-shadow: -4px 0 0 var(--primary);
}

/* Loading overlay with blur transition */
.loading-overlay {
  animation: fade-blur-in 0.3s ease;
}

@keyframes fade-blur-in {
  from {
    opacity: 0;
    backdrop-filter: blur(0);
  }
  to {
    opacity: 1;
    backdrop-filter: blur(4px);
  }
}



/* Supprimé - glow inutile */





/* Button press effect */
.btn:active, .btn-action:active, .filter-chip:active {
  transform: scale(0.95);
}

/* Supprimé - déjà défini plus haut */

/* Count badge pulse */
.chip-count {
  animation: count-pulse 0.3s ease;
}

@keyframes count-pulse {
  0% { transform: scale(0.8); opacity: 0; }
  100% { transform: scale(1); opacity: 1; }
}

/* Dropdown slide in */
.filter-dropdown {
  animation: dropdown-slide 0.2s ease;
  transform-origin: top;
}

@keyframes dropdown-slide {
  0% {
    opacity: 0;
    transform: scaleY(0.8) translateY(-10px);
  }
  100% {
    opacity: 1;
    transform: scaleY(1) translateY(0);
  }
}

/* Supprimé - consolidé plus bas */

/* Smooth color transitions */
* {
  transition-property: color, background-color, border-color, fill, stroke;
  transition-duration: 150ms;
  transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
}

/* Prevent transition on layout changes */
.no-transition {
  transition: none !important;
}

/* 3D card tilt on hover (advanced) */
@media (hover: hover) and (pointer: fine) {
  .card-3d {
    transition: transform 0.3s ease;
    transform-style: preserve-3d;
  }
  
  .card-3d:hover {
    transform: perspective(1000px) rotateX(2deg) rotateY(2deg) scale(1.02);
  }
}


/* Smooth opacity transitions */
.hidden {
  opacity: 0;
  pointer-events: none;
  transition: opacity 0.2s ease;
}



/* Reduce motion for accessibility */
/* === ♿ ACCESSIBILITÉ - Reduced Motion === */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }
}

/* === 🎬 KEYFRAMES MINIMALISTES 2025 === */
/* Pas de keyframes complexes - transitions simples uniquement */

/* === 👆 DRAG & DROP MINIMALISTE === */

/* Colonne grab - ultra-discrète */
.th-grab {
  width: 24px;
  text-align: center;
  padding: var(--space-sm) !important;
}

.td-grab {
  width: 24px;
  text-align: center;
  padding: var(--space-sm) !important;
}

/* Handle discret mais visible */
.grab-handle {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 20px;
  height: 20px;
  font-size: 14px;
  color: var(--text-secondary);
  opacity: 0;
  transition: opacity var(--anim-duration-fast) var(--anim-ease),
              color var(--anim-duration-fast) var(--anim-ease);
  user-select: none;
  cursor: grab;
}

/* Visible au hover de ligne */
tr:hover .grab-handle {
  opacity: 0.4;
}

/* Bien visible au hover du handle */
.grab-handle:hover {
  opacity: 0.8;
  color: var(--text);
}

/* Curseur pendant le drag */
tr[draggable="true"]:active .grab-handle {
  cursor: grabbing;
}

/* Élément draggé - visible */
tr.dragging {
  opacity: 0.5;
  position: relative;
}

/* Zone de drop - ligne fine */
tr.drag-over {
  border-top: 2px solid var(--primary);
}



/* Pas d'animation par défaut */
.mails tbody tr {
  animation: none !important;
}

/* Indicateur visuel "mode personnalisé" */
.filter-inline-sort option[value="custom"] {
  font-weight: 600;
  color: var(--primary);
}

/* Badge "Ordre personnalisé actif" */
.custom-order-badge {
  display: inline-flex;
  align-items: center;
  gap: var(--space-xs);
  padding: 4px 8px;
  background: var(--primary-light);
  color: var(--primary);
  border-radius: var(--radius-full);
  font-size: var(--font-size-xs);
  font-weight: 600;
  margin-left: var(--space-sm);
}

/* Fantôme pendant drag */
tr.dragging * {
  pointer-events: none;
}

/* Mobile - handle toujours visible */
@media (max-width: 768px) {
  .grab-handle {
    width: 24px;
    height: 24px;
    font-size: 16px;
    opacity: 0.3;
  }
  
  tr:hover .grab-handle {
    opacity: 0.6;
  }
}

/* === 📧👁️ DEUX BLOCS : VISIBLES / MASQUÉS === */

/* Sections d'emails */
.emails-section {
  margin-bottom: var(--space-lg);
}




/* Bloc masqué (details/summary) */








/* Table masquée : style grisé */




/* Effet barré léger sur les lignes masquées */





/* Bouton hide/show dans chaque ligne */






/* Drag between zones */
tbody[data-zone="visible"].drag-target,
tbody[data-zone="hidden"].drag-target {
  background: var(--primary-light);
  outline: 3px dashed var(--primary);
  outline-offset: -3px;
}




/* Améliorer le visuel du bloc visible */

/* Responsive */
@media (max-width: 768px) {
  .section-header h3 {
    font-size: var(--font-size-md);
  }
  
  .action-toggle-btn {
    padding: 4px 8px;
    font-size: 0.7rem;
  }
}

/* === ✅ EMAILS DONE (grisés, en bas) === */

/* Ligne "done" (archivée) */
tr.done {
  opacity: 0.6;
  background: var(--hover-bg);
}

tr.done td {
  color: var(--text-muted);
}

/* Hover sur ligne archivée */
tr.done:hover {
  opacity: 0.8;
  background: var(--selected-bg);
}

/* Séparateur visuel entre actifs et faits */
tr.done:first-of-type {
  border-top: 2px solid var(--border);
  margin-top: var(--space-sm);
}


/* === 👁️ TOGGLE SHOW/HIDE DANS LE HEADER === */

.th-status {
  text-align: center;
  width: 120px;
}

/* Supprimé - déjà défini plus haut */

/* === 📧 EXPÉDITEUR LIEN === */

.td-sender {
  font-weight: 600;
}

.sender-link {
  color: var(--text);
  text-decoration: none;
  font-weight: 600;
  transition: color var(--anim-duration-fast) var(--anim-ease);
  cursor: pointer;
}

.sender-link:hover {
  color: var(--primary);
}

.td-sender strong {
  font-weight: 700;
}

/* === ⏰ HEURE === */

.td-time {
  font-family: var(--font-mono, 'Roboto Mono', monospace);
  font-size: var(--font-size-sm);
  color: var(--text-secondary);
  text-align: center;
  width: 80px;
}

/* === 📌 BOUTONS D'ACTION HARMONISÉS === */

/* Colonnes uniformes - CONSOLIDÉES */
.th-status,
.th-pinned,
.th-trash,
.td-status,
.td-pinned,
.td-trash {
  text-align: center;
  width: 60px;
  padding: var(--space-md);
}

.td-status,
.td-pinned,
.td-trash {
  vertical-align: middle;
}

/* === 🎯 BOUTONS D'ACTION FIGÉS ET HARMONISÉS === */

/* Style de base STRICTEMENT IDENTIQUE */
.status-indicator,
.pin-btn,
.trash-btn {
  /* Reset complet */
  appearance: none;
  margin: 0;
  
  /* Dimensionnement STRICT - box-sizing pour éviter décalages */
  box-sizing: border-box;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 32px;
  height: 32px;
  padding: 0;
  
  /* Style de base */
  background: transparent;
  border: 1px solid transparent;
  border-radius: var(--radius-sm);
  cursor: pointer;
  
  /* Transition UNIQUEMENT sur opacity et couleurs */
  transition: opacity var(--anim-duration-fast) var(--anim-ease),
              background-color var(--anim-duration-fast) var(--anim-ease),
              border-color var(--anim-duration-fast) var(--anim-ease);
  
  /* Invisible par défaut */
  opacity: 0;
  
  /* CRITIQUE: Pas de transform, scale, ou translate */
  transform: none !important;
}

/* Apparition discrète au survol de ligne */
tr:hover .status-indicator,
tr:hover .pin-btn,
tr:hover .trash-btn {
  opacity: 0.5;
}

/* Bien visible au survol du bouton */
.status-indicator:hover,
.pin-btn:hover,
.trash-btn:hover {
  opacity: 1;
  background: var(--hover-bg);
  border-color: var(--border);
}

/* États persistants - Pin épinglé pastel */
.pin-btn.pinned {
  opacity: 0.6;
  background: linear-gradient(135deg,#f0f9ff 0%,#dbeafe 100%);
  border-color: #93c5fd;
  color: var(--primary);
}

.pin-btn.pinned:hover {
  opacity: 1;
  background: linear-gradient(135deg,#93c5fd 0%,#60a5fa 100%);
  border-color: var(--primary);
  color: white;
}

/* États persistants - Trash en corbeille (pastel) */
.trash-btn.trashed {
  opacity: 0.6;
  background: #fee2e2;
  border-color: var(--danger);
  color: #dc2626;
}

.trash-btn.trashed:hover {
  opacity: 1;
  background: var(--danger);
  border-color: #f87171;
  color: white;
}

/* Disabled - légèrement plus visible */
.status-indicator:disabled,
.pin-btn:disabled,
.trash-btn:disabled {
  opacity: 0.3;
  cursor: not-allowed;
}

/* === 🗑️ LIGNES EN CORBEILLE === */
tr.trashed {
  opacity: 0.55;
  background: repeating-linear-gradient(
    45deg,
    transparent,
    transparent 10px,
    rgba(100, 116, 139, 0.03) 10px,
    rgba(100, 116, 139, 0.03) 20px
  );
}

tr.trashed:hover {
  opacity: 0.75;
}

tr.trashed td {
  color: var(--text-muted);
  text-decoration: line-through;
}

tr.trashed .trash-btn {
  opacity: 1;
}

/* === 🎨 HARMONISATION DES ICÔNES DE LIGNE === */

/* Taille et opacité harmonisées */
.icon-eye,
.icon-pin,
.icon-trash {
  width: 18px;
  height: 18px;
  stroke: currentColor;
  stroke-width: 1.8;
  opacity: 0.85;
  
  /* Centrage parfait */
  display: block;
  margin: 0 auto;
  
  /* Pas de transformation */
  transform: none !important;
  transition: opacity var(--anim-duration-fast) var(--anim-ease);
}

/* Icônes plus visibles au hover du bouton */
.status-indicator:hover .icon-eye,
.pin-btn:hover .icon-pin,
.trash-btn:hover .icon-trash {
  opacity: 1;
}

/* Responsive pour quick-info */
@media (max-width: 768px) {
  .summary-quick-info {
    grid-template-columns: 1fr;
  }
}

/* === FOOTER DISCRET === */
.footer{
  position:fixed;
  bottom:0;
  left:0;
  right:0;
  background:transparent;
  padding:var(--space-md);
  z-index:10;
}

.footer-content{
  display:flex;
  flex-direction:column;
  align-items:center;
  gap:var(--space-sm);
}

.footer-links{
  display:flex;
  gap:var(--space-md);
  align-items:center;
  justify-content:center;
}

.footer-link{
  display:flex;
  align-items:center;
  justify-content:center;
  width:36px;
  height:36px;
  border-radius:50%;
  background:transparent;
  transition:all 0.2s ease;
  text-decoration:none;
  opacity:0.6;
}

.footer-link:hover{
  opacity:1;
  transform:translateY(-3px);
}

.footer-icon{
  width:20px;
  height:20px;
  color:#374151;
  stroke-width:2;
}

.footer-credit{
  margin:0;
  font-size:10px;
  color:#9ca3af;
  letter-spacing:0.5px;
  font-weight:500;
}

/* Padding pour éviter le chevauchement avec footer fixe */
body{
  padding-bottom:80px;
}

/* Responsive footer */
@media (max-width: 768px) {
  .footer{
    position:relative;
    margin-top:var(--space-xl);
    padding:var(--space-lg) var(--space-md);
    border-top:1px solid var(--border-light);
    background:var(--bg-primary);
  }
  
  body{
    padding-bottom:0;
  }
}
